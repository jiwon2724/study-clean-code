# CHAPTER 3: 함수

## 작게 만들기
- 각 함수가 이야기 하나를 표현하도록
- 블록과 들여쓰기
  - if문 / else문 / while문 등에 들어가는 블록은 한 줄이어야 한다.
  - 중첩 구조가 생길만큼 함수가 커져서는 안 된다.
  - 함수에서 들여쓰기 수준은 1단이나 2단을 넘어서서는 안 된다.

## 한 가지만 하기
- 지정된 함수 이름 아래에서 추상화 수준이 하나인 단계만 수행한다면 그 함수는 한 가지 작업만 한다.
  - 어쨌거나 우리가 우리가 함수를 만드는 이유는 큰 개념을 다음 추상화 수준에서 여러 단계로 나눠 수행하기 위해서다.

## 함수당 추상화 수준은 하나로
- 함수가 한 가지 작업만 하려면 함수 내 모든 문장의 추상화 수준이 동일해야 한다.
- 내려가기 규칙: 위에서 아래로 코드 읽기
  - 코드는 위에서 아래로 이야기처럼 읽혀야 좋다.
  - 한 함수 다음에는 추상화 수준이 한 단계 낮은 함수가 온다.
  - 위에서 아래로 내려갈수록 함수 추상화 수준이 한 번에 한 단계씩 낮아진다.

## switch 문
- 각 switch 문을 저차원 클래스에 숨기고 절대로 반복하지 않기
  - 다형성을 이용
  - switch 문을 추상 팩토리에 숨기기
  - [추상 팩토리 패턴](https://refactoring.guru/ko/design-patterns/abstract-factory)

## 서술적인 이름 사용하기
- 길고 서술적인 이름이 짧고 어려운 이름보다 좋다.
- 길고 서술적인 이름이 길고 서술적인 주석보다 좋다.
- 여러 단어가 쉽게 읽히는 명명법을 이용한다.
- 일관성 있는 명명법을 사용하라
  - 같은 문구, 명사, 동사 사용

## 부수 효과를 일으키지 않기
- 함수에서 한 가지를 하겠다고 약속하고선 몰래 다른 짓을 하기 때문에 부수 효과가 생긴다.
- 때로는 예기치 못하게 클래스 변수를 수정하고,  함수로 넘어온 인수나 시스템 전역 변수를 수정한다.
- 많은 경우 시간적인 결합이나 순서 종속성을 초래한다.
- 시간적인 결합이 필요하다면 함수 이름에 분명히 명시해야 한다.
  - 함수가 '한가지'만 해야 한다는 규칙을 위반하지만

## 명령과 조회를 분리하기
- 함수는 뭔가를 수행하거나 답하거나 둘 중 하나만 해야 한다.
- 객체 상태를 변환하거나 객체 정보를 반환하거나 둘 중 하나다.

## 오류 코드보다 예외 사용
- 오류 코드 대신 예외를 사용하면 오류 처리 코드가 원래 코드에서 분리되므로 코드가 깔끔해진다.

## 반복하지 마라
- E.F.커드는 관계형 데이터베이스에 정규 형식을 만들어 자료에서 중복을 제거했다.
- 객체지향 프로그래밍은 코드를 부모 클래스로 몰아 중복을 없앤다.
- 구조적 프로그래밍, AOP, COP 모두 어떤 면에서의 중복 제거 전략

## 함수를 어떻게 짜야 할까?
처음에는 길고 복잡하다.

서투른 코드를 테스트하는 단위 테스트 케이스를 만들고, 코드를 다듬고, 함수를 만들고, 이름을 바꾸고, 중복을 제거한다.

메서드를 줄이고 순서를 바꾼다.

때로는 전체 클래스를 쪼개기도 한다.